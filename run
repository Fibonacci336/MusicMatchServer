clear
clean () {
	swift package clean
	echo "Cleaning..."
}

buildFailed () {
	echo "Build Failed"
}

buildSucessful () {
	echo "Build Succeeded!"
	./.build/debug/MusicMatchServer
}

./tryStartMySQL

if [[ $1 = -clean ]]
then
	clean
fi
if [[ $1 = -mysql ]]
then
	./fixmysql.sh
fi

swift build -Xswiftc -suppress-warnings && buildSucessful || buildFailed
